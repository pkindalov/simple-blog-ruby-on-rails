<!DOCTYPE html>
<html lang="en">
<head>
  <title>MyApp</title>
  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true, type: "module" %>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
</head>
<body>
<!--<nav class="navbar navbar-expand-lg navbar-light bg-light">-->
<!--  <a class="navbar-brand" href="#">MyApp</a>-->
<!--  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">-->
<!--    <span class="navbar-toggler-icon"></span>-->
<!--  </button>-->
<!--  <div class="collapse navbar-collapse" id="navbarNav">-->
<!--    <ul class="navbar-nav ml-auto">-->
<!--      <li class="nav-item">-->
<!--        <a class="nav-link" href="<%#= root_path %>">Home</a>-->
<!--      </li>-->
<!--      <li class="nav-item">-->
<!--        <a class="nav-link" href="<%#= about_path %>">About</a>-->
<!--      </li>-->
<!--      <li class="nav-item">-->
<!--        <a class="nav-link" href="<%#= services_path %>">Services</a>-->
<!--      </li>-->
<!--      <li class="nav-item">-->
<!--        <a class="nav-link" href="<%#= contacts_path %>">Contacts</a>-->
<!--      </li>-->
<!--    </ul>-->
<!--  </div>-->
<!--</nav>-->

<header class="bg-primary text-white text-center py-5">
  <div class="container">
    <h1>Welcome to MyApp</h1>
    <p class="lead">Your one-stop solution for all your needs</p>
    <a href="<%= services_path %>" class="btn btn-lg btn-light mt-3">Our Services</a>
  </div>
</header>

<section class="py-5">
  <div class="container">
    <% if current_user %>
      <h2>Recent Posts</h2>
      <div class="row">
        <%#= current_user.id %>
        <% @posts.each do |post| %>

          <%#= post.inspect %>
          <%#= debug post %>

          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100">
              <% if post && post.photos.attached? %>
                <%= image_tag url_for(post.photos[0]), class: 'card-img-top', alt: 'Post Image' %>
              <% else %>
                <!-- Покажи някаква дефоултна снимка или нищо, според вашия дизайн -->
                <%= image_tag 'default_image.png', class: 'card-img-top', alt: 'Default Image' %>
              <% end %>
              <div class="card-body">
                <h4 class="card-title mb-5">🖋 <%= post.title %></h4>
                <hr />
                <p class="card-text">👁 Viewed <%= post.views_count %> times</p>
                <p class="card-text">📝 <%= post.description %></p>
                <p class="card-text">📷 Photos <%= post.photos.count %></p>
                <p class="card-text mb-5">📅 Posted on <%= post.created_at.strftime("%d %B %Y") %></p>

<!--                <p class="card-text"><small class="text-muted"><%#= post.post_date %></small></p>-->
                <% if post.user_id == current_user.id %>
                  <%= link_to '🖊 Edit', edit_post_path(post), class: 'btn btn-primary' %>
                  <%= link_to '❌ Delete', post, method: :delete, data: { confirm: 'Сигурни ли сте?' }, class: 'btn btn-danger' %>
                <% end %>
                <%= link_to '👀 Show', post_path(post), class: 'btn btn-info' %>
                <% unless current_user == post.user %>
                  <% if already_liked?(post) %>
                    <%= link_to post_like_path(post, post.likes.find_by(user_id: current_user.id)), method: :delete, class: 'btn btn-primary' do %>
                      👎 Unlike
                    <% end %>
                  <% else %>
                    <%= link_to post_likes_path(post), method: :post, class: 'btn btn-primary' do %>
                      👍 Like
                    <% end %>
                  <% end %>
                <% end %>

                <a href="#" class="btn disabled">👥 👍<%= post.likes.count %></a>
              </div>
            </div>
          </div>
        <% end %>

      </div>

      <div class="text-center">
        <%= will_paginate @posts, renderer: BootstrapPagination::Rails %>
      </div>

    <% else %>
      <div class="row">
        <div class="col-lg-4">
          <h2>About Us</h2>
          <p>Learn more about what we do and our mission.</p>
          <a href="<%= about_path %>" class="btn btn-primary">Learn More</a>
        </div>
        <div class="col-lg-4">
          <h2>Services</h2>
          <p>Discover the wide range of services we offer to our clients.</p>
          <a href="<%= services_path %>" class="btn btn-primary">Our Services</a>
        </div>
        <div class="col-lg-4">
          <h2>Contact Us</h2>
          <p>Get in touch with us for any inquiries or support.</p>
          <a href="<%= contacts_path %>" class="btn btn-primary">Contact</a>
        </div>
      </div>
    <% end %>
  </div>
</section>

<footer class="bg-light text-center py-4">
  <div class="container">
    <p class="mb-0">&copy; 2024 MyApp. All rights reserved.</p>
  </div>
</footer>
</body>
</html>
